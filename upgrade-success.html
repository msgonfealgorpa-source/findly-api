<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªÙ… Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ - Findly</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Cairo',sans-serif;
  background: radial-gradient(circle at top,#020617,#000);
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.box{
  background:#020617;
  border:1px solid #1e293b;
  border-radius:20px;
  padding:40px;
  width:90%;
  max-width:420px;
  text-align:center;
  box-shadow:0 0 40px rgba(34,197,94,0.15);
  animation:fade 0.6s ease;
}

@keyframes fade{
  from{opacity:0; transform:translateY(20px);}
  to{opacity:1; transform:translateY(0);}
}

.icon{
  font-size:60px;
  margin-bottom:10px;
}

.title{
  font-size:28px;
  color:#22c55e;
  margin-bottom:10px;
}

.desc{
  color:#aaa;
  margin-bottom:20px;
}

.btn{
  display:inline-block;
  margin-top:15px;
  padding:12px 25px;
  background:#38bdf8;
  color:black;
  border-radius:12px;
  text-decoration:none;
  font-weight:bold;
}

.loader{
  border:4px solid #1e293b;
  border-top:4px solid #38bdf8;
  border-radius:50%;
  width:40px;
  height:40px;
  margin:20px auto;
  animation:spin 1s linear infinite;
}

@keyframes spin{
  0%{transform:rotate(0deg);}
  100%{transform:rotate(360deg);}
}

.small{
  font-size:14px;
  color:#888;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="box" id="box">
  <div class="icon">â³</div>
  <div class="title">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</div>
  <div class="loader"></div>
  <div class="small">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...</div>
</div>

<script>

const uid = localStorage.getItem('findly_uid') || 'guest';

async function checkSubscription(){

  try{

    const res = await fetch('https://findly-api-production.up.railway.app/subscription/status?uid=' + uid);
    const data = await res.json();

    const box = document.getElementById('box');

    if(data.active){

      // âœ… ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„
      localStorage.setItem('findly_pro','true');

      box.innerHTML = `
        <div class="icon">ğŸ‰</div>
        <div class="title">ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ø´ØªØ±Ø§ÙƒÙƒ Ø¨Ù†Ø¬Ø§Ø­</div>
        <div class="desc">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Findly Pro ğŸš€</div>

        <a class="btn" href="https://msgonfealgorpa-source.github.io/findly-api/">
          Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        </a>

        <div class="small">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø¨Ø¯ÙˆÙ† Ø­Ø¯ÙˆØ¯</div>
      `;

    }else{

      // â³ Ù„Ù… ÙŠØªÙØ¹Ù„ Ø¨Ø¹Ø¯ â†’ Ø£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ Ø«ÙˆØ§Ù†ÙŠ
      setTimeout(checkSubscription, 3000);

    }

  }catch(e){

    document.getElementById('box').innerHTML = `
      <div class="icon">âš ï¸</div>
      <div class="title">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</div>
      <div class="desc">ØªØ¹Ø°Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</div>
      <a class="btn" href="https://msgonfealgorpa-source.github.io/findly-api/">
        Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚
      </a>
    `;

  }

}

// ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ù‚Ù‚
checkSubscription();

</script>

</body>
</html>
