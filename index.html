<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Findly AI | Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…Ø¯Ù…Ø¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #6366f1; --dark-bg: #0f172a; --card-bg: rgba(30, 41, 59, 0.7); }
        body { font-family: 'Cairo', sans-serif; background-color: var(--dark-bg); color: white; margin: 0; }
        .hero-bg { background: radial-gradient(circle at top center, #4f46e5 0%, var(--dark-bg) 60%); position: absolute; top: 0; left: 0; width: 100%; height: 600px; z-index: -1; }
        .search-wrapper { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 24px; padding: 8px; max-width: 650px; margin: 30px auto 0; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
        .search-input { width: 100%; border: none; outline: none; padding: 12px 15px; color: white; background: transparent; font-size: 16px; text-align: right; }
        .search-btn { background: var(--primary); color: white; border-radius: 18px; padding: 10px 30px; font-weight: 700; transition: 0.3s; }
        .product-card { background: var(--card-bg); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; overflow: hidden; transition: 0.3s; position: relative; }
        .spec-badge { background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); color: #a5b4fc; padding: 4px 10px; border-radius: 8px; font-size: 11px; margin: 2px; display: inline-block; }
        .buy-btn { background: linear-gradient(90deg, #10b981, #059669); color: white; text-align: center; padding: 12px; border-radius: 12px; font-weight: bold; display: block; text-decoration: none; transition: 0.3s; }
        .ai-reason { background: linear-gradient(90deg, #fbbf24, #d97706); color: black; font-size: 11px; padding: 4px 12px; border-radius: 0 0 12px 12px; position: absolute; top: 0; left: 20px; font-weight: 800; }
        .animate-fade-in { animation: fadeIn 0.5s ease forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="hero-bg"></div>

<section class="max-w-6xl mx-auto px-4 py-8">
    <header class="flex justify-between items-center mb-12">
        <div class="text-3xl font-black italic tracking-tighter">Findly<span class="text-indigo-500">.</span></div>
    </header>

    <div class="text-center mb-16">
        <h1 class="text-4xl md:text-6xl font-black mb-6 leading-tight">Ø§Ø¨Ø­Ø« Ø¨Ø°ÙƒØ§Ø¡ØŒ <span class="text-indigo-400">Ø§Ø´ØªØ±Ù Ø¨Ø¶ØºØ·Ø© ÙˆØ§Ø­Ø¯Ø©.</span></h1>
        <div class="search-wrapper flex items-center">
            <input type="text" id="search-q" placeholder="Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡ Ø§Ù„ÙŠÙˆÙ…ØŸ" class="search-input">
            <button onclick="runSmartSearch()" class="search-btn">ØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ</button>
        </div>
    </div>

    <div id="loading" class="hidden text-center text-indigo-400 font-bold mb-8 animate-pulse">ğŸ¤– ÙŠØ­Ù„Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø·Ù„Ø¨Ùƒ Ø§Ù„Ø¢Ù†...</div>
    <div id="results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</section>

<script>
    // Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ (ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ù…Ù„Ù server.js)
    const API_BASE = "http://localhost:3000"; 

    async function runSmartSearch() {
        const query = document.getElementById('search-q').value;
        const resultsDiv = document.getElementById('results');
        const loader = document.getElementById('loading');
        
        if(!query) return alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø´ÙŠØ¦Ø§Ù‹ Ù„Ù„Ø¨Ø­Ø«");

        resultsDiv.innerHTML = '';
        loader.classList.remove('hidden');

        try {
            // Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ù…Ø¯Ù…Ø¬ Ø¨Ù€ OpenAI
            const response = await fetch(`${API_BASE}/search?q=${encodeURIComponent(query)}`);
            const data = await response.json();

            loader.classList.add('hidden');

            if (data.top && data.top.length > 0) {
                data.top.forEach((item, index) => {
                    const specsHTML = item.specs.map(s => `<span class="spec-badge">${s}</span>`).join('');
                    const card = `
                        <div class="product-card p-5 flex flex-col justify-between h-full animate-fade-in" style="animation-delay: ${index * 100}ms">
                            <div class="ai-reason">${item.reason || 'ØªØ±Ø´ÙŠØ­ Ø°ÙƒÙŠ'}</div>
                            <div class="h-48 w-full bg-white rounded-xl flex items-center justify-center p-4 mb-4 mt-4">
                                <img src="${item.image}" alt="${item.name}" class="max-h-full object-contain">
                            </div>
                            <div>
                                <h3 class="font-bold text-lg mb-2">${item.name}</h3>
                                <div class="mb-3">${specsHTML}</div>
                            </div>
                            <div class="mt-4 pt-4 border-t border-white/10">
                                <div class="flex justify-between items-center mb-3">
                                    <span class="text-sm text-gray-400 font-bold">Ø§Ù„Ø³Ø¹Ø±</span>
                                    <span class="text-xl font-black text-white">${item.price}</span>
                                </div>
                                <a href="${item.link}" target="_blank" class="buy-btn">Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ğŸ›’</a>
                            </div>
                        </div>
                    `;
                    resultsDiv.insertAdjacentHTML('beforeend', card);
                });
            } else {
                resultsDiv.innerHTML = '<p class="text-center w-full">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ù†Ø¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ØªØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ.</p>';
            }
        } catch (error) {
            loader.classList.add('hidden');
            console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±:", error);
            alert("ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ± (node server.js)");
        }
    }
</script>
</body>
</html>
