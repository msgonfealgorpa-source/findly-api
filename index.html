<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Findly AI - Multi-Language Search</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea, #764ba2);
            --app-bg: linear-gradient(180deg, #1a1a2e, #16213e);
        }
        
        body { 
            font-family: 'Cairo', 'Inter', sans-serif; 
            transition: all 0.3s ease;
        }

        .app-bg {
            background: var(--app-bg);
            min-height: 100vh;
        }

        .glass {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.2s, background 0.2s;
        }

        .glass:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
        }

        .gradient-header {
            background: var(--primary-gradient);
        }

        /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ¥ŸÉŸÑ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÜÿ≥ÿØŸÑÿ© */
        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='white'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 1em;
            padding-right: 2.5rem !important;
        }
        
        [dir="rtl"] select {
            background-position: left 0.7rem center;
            padding-left: 2.5rem !important;
            padding-right: 1rem !important;
        }
    </style>
</head>

<body class="app-bg text-white">

<header class="gradient-header p-6 rounded-b-[3rem] shadow-2xl">
    <div class="max-w-5xl mx-auto">
        
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-4xl font-black tracking-tighter">Findly</h1>
            
            <div class="relative">
                <select id="lang-select" class="bg-white/10 border border-white/20 text-white text-sm rounded-xl block w-full p-2.5 outline-none focus:ring-2 ring-purple-400">
                    <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                    <option value="en">English</option>
                    <option value="fr">Fran√ßais</option>
                    <option value="it">Italiano</option>
                    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                    <option value="zh">‰∏≠Êñá</option>
                </select>
            </div>
        </div>

        <div class="text-center space-y-4">
            <span class="bg-black/20 px-6 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest inline-block mb-2" id="ai-label">
                ü§ñ AI Smart Assistant
            </span>
            <p class="text-xl font-light opacity-90 max-w-2xl mx-auto leading-relaxed" id="subtitle"></p>
        </div>

        <div class="mt-8 relative max-w-xl mx-auto group">
            <input id="search-input" type="text"
                class="w-full py-5 px-8 rounded-2xl text-gray-900 shadow-2xl outline-none text-lg transition-all focus:ring-4 ring-purple-500/50">

            <button id="search-btn"
                class="absolute inset-y-2 ltr:right-2 rtl:left-2 bg-purple-700 hover:bg-purple-800 transition-all text-white px-6 rounded-xl font-bold shadow-lg active:scale-95">
            </button>
        </div>

        <p class="text-center text-sm mt-4 opacity-70 italic" id="hint"></p>

        <div class="mt-8 grid grid-cols-3 md:grid-cols-5 gap-3 max-w-3xl mx-auto text-sm" id="categories"></div>

    </div>
</header>

<main class="max-w-6xl mx-auto px-6 mt-12 pb-24">
    <div class="flex flex-col md:flex-row justify-between items-end mb-8 border-b border-white/10 pb-4">
        <div>
            <h2 class="text-2xl font-bold" id="results-title"></h2>
            <p class="text-sm opacity-60 mt-1" id="status"></p>
        </div>
    </div>
    
    <div id="results" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
        </div>
</main>

<script>
/* üåê ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿ∫ÿßÿ™ */
const translations = {
    ar: {
        subtitle: "ÿßÿ®ÿ≠ÿ´ ÿ®ÿ∑ÿ±ŸäŸÇÿ™ŸÉÿå Ÿàÿßÿ™ÿ±ŸÉ ÿπŸÑŸâ Findly ŸÖŸáŸÖÿ© ÿßŸÑŸÖŸÇÿßÿ±ŸÜÿ© ŸàÿßŸÑÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿ∞ŸÉŸä.",
        placeholder: "ŸÖÿßÿ∞ÿß ÿ™ÿ®ÿ≠ÿ´ ÿπŸÜŸá ÿßŸÑŸäŸàŸÖÿü",
        search: "ÿ®ÿ≠ÿ´ ÿ∞ŸÉŸä",
        hint: "ÿØÿπ Findly ŸäŸÇÿßÿ±ŸÜ ŸàŸäŸÇÿ™ÿ±ÿ≠ ÿßŸÑÿ£ŸÅÿ∂ŸÑ ŸÑŸÉ",
        results: "ŸÜÿ™ÿßÿ¶ÿ¨ ÿ∞ŸÉŸäÿ© ŸÑŸÉ",
        status: "ÿßŸÉÿ™ÿ® ŸÉŸÑŸÖÿ© ÿ®ÿ≠ÿ´ Ÿàÿßÿ∂ÿ∫ÿ∑ \"ÿ®ÿ≠ÿ´ ÿ∞ŸÉŸä\"",
        searching: "‚è≥ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ®ÿ≠ÿ´...",
        noResults: "‚ùå ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨",
        error: "‚ö†Ô∏è ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ",
        buy: "ÿ¥ÿ±ÿßÿ° ÿßŸÑÿ¢ŸÜ",
        found: (n) => `üîç ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ${n} ŸÜÿ™ÿßÿ¶ÿ¨`,
        cats: ["üì± ŸáŸàÿßÿ™ŸÅ", "üéß ÿ≥ŸÖÿßÿπÿßÿ™", "‚åö ÿ≥ÿßÿπÿßÿ™", "üß¢ ŸÖŸÑÿßÿ®ÿ≥", "üîå ÿ•ŸÉÿ≥ÿ≥Ÿàÿßÿ±ÿßÿ™"]
    },
    en: {
        subtitle: "Search your way and let Findly handle smart comparison.",
        placeholder: "What are you looking for?",
        search: "Smart Search",
        hint: "Let Findly compare and suggest the best",
        results: "Smart Results for You",
        status: "Type a keyword and click Smart Search",
        searching: "‚è≥ Searching...",
        noResults: "‚ùå No results found",
        error: "‚ö†Ô∏è Connection error",
        buy: "Buy Now",
        found: (n) => `üîç Found ${n} results`,
        cats: ["üì± Phones", "üéß Audio", "‚åö Watches", "üß¢ Fashion", "üîå Tech"]
    },
    fr: {
        subtitle: "Cherchez √† votre fa√ßon et laissez Findly g√©rer la comparaison.",
        placeholder: "Que cherchez-vous ?",
        search: "Recherche",
        hint: "Laissez Findly sugg√©rer le meilleur",
        results: "R√©sultats Intelligents",
        status: "Entrez un mot-cl√© et cliquez sur Rechercher",
        searching: "‚è≥ Recherche...",
        noResults: "‚ùå Aucun r√©sultat",
        error: "‚ö†Ô∏è Erreur de connexion",
        buy: "Acheter",
        found: (n) => `üîç ${n} r√©sultats trouv√©s`,
        cats: ["üì± Mobiles", "üéß Audio", "‚åö Montres", "üß¢ Mode", "üîå Accessoires"]
    },
    it: {
        subtitle: "Cerca a modo tuo e lascia che Findly gestisca il confronto.",
        placeholder: "Cosa stai cercando?",
        search: "Cerca",
        hint: "Lascia che Findly ti suggerisca il meglio",
        results: "Risultati Intelligenti",
        status: "Digita una parola chiave e clicca su Cerca",
        searching: "‚è≥ Ricerca...",
        noResults: "‚ùå Nessun risultato",
        error: "‚ö†Ô∏è Errore di connessione",
        buy: "Acquista",
        found: (n) => `üîç ${n} risultati trovati`,
        cats: ["üì± Telefoni", "üéß Audio", "‚åö Orologi", "üß¢ Moda", "üîå Accessori"]
    },
    ru: {
        subtitle: "–ò—â–∏—Ç–µ –ø–æ-—Å–≤–æ–µ–º—É, –∞ Findly —Å–¥–µ–ª–∞–µ—Ç —É–º–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–∞ –≤–∞—Å.",
        placeholder: "–ß—Ç–æ –≤—ã –∏—â–µ—Ç–µ —Å–µ–≥–æ–¥–Ω—è?",
        search: "–ü–æ–∏—Å–∫",
        hint: "–ü—É—Å—Ç—å Findly –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –ª—É—á—à–µ–µ",
        results: "–£–º–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã",
        status: "–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –∏ –Ω–∞–∂–º–∏—Ç–µ –ü–æ–∏—Å–∫",
        searching: "‚è≥ –ü–æ–∏—Å–∫...",
        noResults: "‚ùå –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–µ—Ç",
        error: "‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è",
        buy: "–ö—É–ø–∏—Ç—å",
        found: (n) => `üîç –ù–∞–π–¥–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: ${n}`,
        cats: ["üì± –¢–µ–ª–µ—Ñ–æ–Ω—ã", "üéß –ê—É–¥–∏–æ", "‚åö –ß–∞—Å—ã", "üß¢ –û–¥–µ–∂–¥–∞", "üîå –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã"]
    },
    zh: {
        subtitle: "‰ª•ÊÇ®ÁöÑÊñπÂºèÊêúÁ¥¢ÔºåËÆ© Findly Â§ÑÁêÜÊô∫ËÉΩÊØîËæÉ„ÄÇ",
        placeholder: "‰Ω†‰ªäÂ§©Âú®Êâæ‰ªÄ‰πàÔºü",
        search: "Êô∫ËÉΩÊêúÁ¥¢",
        hint: "ËÆ© Findly ‰∏∫ÊÇ®Êé®ËçêÊúÄÂ•ΩÁöÑ",
        results: "‰∏∫ÊÇ®Êèê‰æõÁöÑÊô∫ËÉΩÁªìÊûú",
        status: "ËæìÂÖ•ÂÖ≥ÈîÆËØçÂπ∂ÁÇπÂáªÊô∫ËÉΩÊêúÁ¥¢",
        searching: "‚è≥ Ê≠£Âú®ÊêúÁ¥¢...",
        noResults: "‚ùå Êú™ÊâæÂà∞ÁªìÊûú",
        error: "‚ö†Ô∏è ËøûÊé•ÈîôËØØ",
        buy: "Á´ãÂç≥Ë¥≠‰π∞",
        found: (n) => `üîç ÊâæÂà∞ ${n} ‰∏™ÁªìÊûú`,
        cats: ["üì± ÊâãÊú∫", "üéß ËÄ≥Êú∫", "‚åö ÊâãË°®", "üß¢ ÊúçË£Ö", "üîå ÈÖç‰ª∂"]
    }
};

let currentLang = 'ar';

function updateUI(lang) {
    currentLang = lang;
    const T = translations[lang];
    
    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿßÿ™ÿ¨ÿßŸá
    const dir = lang === 'ar' ? 'rtl' : 'ltr';
    document.documentElement.dir = dir;
    document.documentElement.lang = lang;

    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿµŸàÿµ
    document.getElementById("subtitle").textContent = T.subtitle;
    document.getElementById("search-input").placeholder = T.placeholder;
    document.getElementById("search-btn").textContent = T.search;
    document.getElementById("hint").textContent = T.hint;
    document.getElementById("results-title").textContent = T.results;
    document.getElementById("status").textContent = T.status;

    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿµŸÜŸäŸÅÿßÿ™
    document.getElementById("categories").innerHTML = T.cats
        .map(c => `<div class="glass py-3 rounded-2xl text-center cursor-pointer font-medium">${c}</div>`)
        .join("");
}

/* üîç ŸÖŸÜÿ∑ŸÇ ÿßŸÑÿ®ÿ≠ÿ´ */
const API_URL = "https://findly-api.onrender.com/search";
const btn = document.getElementById("search-btn");
const input = document.getElementById("search-input");
const resultsDiv = document.getElementById("results");
const statusText = document.getElementById("status");
const langSelect = document.getElementById("lang-select");

// ŸÉÿ¥ŸÅ ŸÑÿ∫ÿ© ÿßŸÑÿ¨Ÿáÿßÿ≤ ÿπŸÜÿØ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ
const deviceLang = navigator.language.split('-')[0];
const initialLang = translations[deviceLang] ? deviceLang : 'ar';
langSelect.value = initialLang;
updateUI(initialLang);

langSelect.onchange = (e) => updateUI(e.target.value);

btn.onclick = search;
input.onkeypress = e => e.key === "Enter" && search();

async function search() {
    const q = input.value.trim();
    if (!q) return;

    const T = translations[currentLang];
    statusText.textContent = T.searching;
    resultsDiv.innerHTML = "";

    try {
        const res = await fetch(`${API_URL}?q=${encodeURIComponent(q)}`);
        const data = await res.json();

        if (!data.top || !data.top.length) {
            statusText.textContent = T.noResults;
            return;
        }

        statusText.textContent = T.found(data.top.length);

        data.top.forEach(item => {
            resultsDiv.innerHTML += `
                <div class="glass rounded-[2rem] overflow-hidden group shadow-xl">
                    <div class="relative overflow-hidden">
                        <img src="${item.image}" class="h-52 w-full object-cover transform group-hover:scale-110 transition duration-500">
                        <div class="absolute top-3 right-3 bg-black/50 backdrop-blur-md px-3 py-1 rounded-lg text-xs">
                            ‚òÖ ${item.rating || '4.5'}
                        </div>
                    </div>
                    <div class="p-5">
                        <h3 class="font-bold text-lg mb-2 truncate">${item.name}</h3>
                        <div class="flex justify-between items-center mt-4">
                            <span class="text-xl font-black text-purple-400">${item.price || "‚Äî"}</span>
                            <a href="${item.link || '#'}" target="_blank"
                               class="bg-white text-purple-900 px-5 py-2 rounded-xl text-sm font-bold hover:bg-purple-100 transition shadow-md">
                                ${T.buy}
                            </a>
                        </div>
                    </div>
                </div>`;
        });

    } catch {
        statusText.textContent = T.error;
    }
}
</script>

</body>
</html>
