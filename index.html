<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Findly AI | Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

<style>
:root { --main-purple:#6366f1; --dark-bg:#0f172a; }
body{font-family:'Cairo',sans-serif;background:var(--dark-bg);color:white;margin:0}
.hidden{display:none!important}
.hero-section{background:linear-gradient(180deg,var(--main-purple),#4f46e5);border-bottom-left-radius:80px;border-bottom-right-radius:80px;padding:30px 20px 80px}
.search-container{background:white;border-radius:100px;display:flex;align-items:center;padding:5px;max-width:500px;margin:30px auto 0}
.search-input{flex:1;border:none;outline:none;padding:12px 20px;color:#333;font-weight:bold}
.search-btn{background:var(--main-purple);color:white;border-radius:100px;padding:12px 30px;font-weight:900;border:none}
.cat-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-top:-40px;padding:0 25px}
.cat-card{background:rgba(255,255,255,.1);border-radius:30px;padding:25px;text-align:center;font-weight:bold;cursor:pointer}
</style>
</head>

<body>

<section id="auth-view" class="min-h-screen flex items-center justify-center p-6">
<div class="w-full max-w-sm text-center">
<h1 class="text-5xl font-black italic mb-8">Findly<span class="text-yellow-400">.</span></h1>

<div class="bg-white/5 border border-white/10 p-8 rounded-[40px] space-y-4 backdrop-blur-md">
<input id="reg-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" class="w-full p-4 rounded-2xl bg-white/10 outline-none border border-white/10 text-center text-white">
<input id="reg-email" type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" class="w-full p-4 rounded-2xl bg-white/10 outline-none border border-white/10 text-center text-white">
<input id="reg-pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full p-4 rounded-2xl bg-white/10 outline-none border border-white/10 text-center text-white">

<button onclick="handleAuth()" class="w-full bg-indigo-600 text-white py-4 rounded-2xl font-bold text-lg">
Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†
</button>
</div>
</div>
</section>

<section id="app-view" class="hidden">

<div class="hero-section text-center">
<h1 class="text-4xl font-black mb-4">Ø§Ø¹Ø«Ø± Ø¹Ù„Ù‰ Ø®ÙŠØ§Ø±Ùƒ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ø¨Ø°ÙƒØ§Ø¡</h1>

<div class="search-container">
<input id="search-q" placeholder="Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªØ´ØªØ±ÙŠØŸ" class="search-input">
<button id="main-search-btn" onclick="runSmartSearch()" class="search-btn">Ø¨Ø­Ø« Ø°ÙƒÙŠ</button>
</div>

<div id="limit-msg" class="text-[10px] mt-3 text-yellow-200 hidden">ØªØ­ØªØ§Ø¬ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±</div>
</div>

<div class="cat-grid">
<div onclick="quickSearch('Ø³Ù…Ø§Ø¹Ø§Øª Ù„Ø§Ø³Ù„ÙƒÙŠØ©')" class="cat-card">ğŸ§ Ø³Ù…Ø§Ø¹Ø§Øª</div>
<div onclick="quickSearch('Ù‡ÙˆØ§ØªÙ Ø°ÙƒÙŠØ©')" class="cat-card">ğŸ“± Ù‡ÙˆØ§ØªÙ</div>
<div onclick="quickSearch('Ù„Ø§Ø¨ØªÙˆØ¨')" class="cat-card">ğŸ’» Ù„Ø§Ø¨ØªÙˆØ¨</div>
</div>

<main class="max-w-4xl mx-auto mt-10 px-6 pb-20">
<div id="status-msg" class="text-center font-bold text-indigo-400 mb-6"></div>
<div id="results"></div>
</main>

</section>

<script>

const API_BASE = "https://findly-api.onrender.com";

function checkSession() {
    const logged = localStorage.getItem("f_logged");
    const auth = document.getElementById("auth-view");
    const app = document.getElementById("app-view");

    if (logged === "1") {
        auth.style.display = "none";
        app.classList.remove("hidden");
    } else {
        auth.style.display = "flex";
        app.classList.add("hidden");
    }
}

window.handleAuth = function() {
    const n = reg-name.value.trim();
    const e = reg-email.value.trim();
    const p = reg-pass.value.trim();

    if(!n || !e || !p) return alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„");

    localStorage.setItem("f_logged","1");
    location.reload();
}

window.addEventListener("load", checkSession);

function runSmartSearch() {
    const q = search-q.value.trim();
    if(!q) return;

    status-msg.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...";
    fetch(`${API_BASE}/search?q=${encodeURIComponent(q)}`)
    .then(r=>r.json())
    .then(d=>{
        status-msg.innerText="";
        results.innerHTML="";
        d.top.forEach(item=>{
            results.innerHTML += `<div class="bg-white/5 p-4 rounded-xl mb-3">${item.name} - ${item.price}</div>`;
        });
    })
    .catch(()=>status-msg.innerText="ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±");
}

function quickSearch(v){
    search-q.value = v;
    runSmartSearch();
}

</script>
</body>
</html>
